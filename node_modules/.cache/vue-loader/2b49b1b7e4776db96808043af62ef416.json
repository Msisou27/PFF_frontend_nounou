{"remainingRequest":"/home/cedricmaglione/PFF/Projet_fin_de_formation_nounou2/nounou_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cedricmaglione/PFF/Projet_fin_de_formation_nounou2/nounou_frontend/src/components/Profiluser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cedricmaglione/PFF/Projet_fin_de_formation_nounou2/nounou_frontend/src/components/Profiluser.vue","mtime":1597480991577},{"path":"/home/cedricmaglione/PFF/Projet_fin_de_formation_nounou2/nounou_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cedricmaglione/PFF/Projet_fin_de_formation_nounou2/nounou_frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cedricmaglione/PFF/Projet_fin_de_formation_nounou2/nounou_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cedricmaglione/PFF/Projet_fin_de_formation_nounou2/nounou_frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgbm91bm91IGZyb20gJ0Avc2VydmljZXMvbm91bm91JwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTonUHJvZmlsdXNlcicsCiAgICBkYXRhOiAoKT0+KHsKICAgIHByb2Q6W10sCiAgICBkZXRhaWw6W10sCi8vLS0tWyBVcGRhdGUgVXNlciBdLS0KICAgIGZpcnN0bmFtZTonJywKICAgIHN1cm5hbWU6JycsCiAgICBlbWFpbDonJywKICAgIG51bWJlcl9hZHJlc3M6JycsCiAgICBhZHJlc3M6JycsCiAgICBsb2NhdGlvbjonJywKICAgIHRvd246JycsCiAgICBwaG9uZTonJywKICB9KSwKICBjcmVhdGVkKCkgewogICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk9PSdudWxsJyl7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLycKICAgIH0KICB9LAogIG1vdW50ZWQ6IGFzeW5jIGZ1bmN0aW9uKCl7ICAKICAgIGNvbnN0IHJlcyA9IGF3YWl0IG5vdW5vdS5yZWN1cEFsbFByb2R1Y3RzVXNlcigpCiAgICB0aGlzLnByb2QgPSByZXMuZGF0YS5kYXRhCiAgICBjb25zb2xlLmxvZyh0aGlzLnByb2QpCgogICAgY29uc3QgcmVzcCA9IGF3YWl0IG5vdW5vdS5yZWN1cFVzZXJEZXRhaWwoKQogICAgdGhpcy5kZXRhaWwgPXJlc3AuZGF0YS51c2VyCiAgICBjb25zb2xlLmxvZyh0aGlzLmRldGFpbCkKCiAgICB0aGlzLmZpcnN0bmFtZSA9IHRoaXMuZGV0YWlsLmZpcnN0bmFtZQogICAgdGhpcy5zdXJuYW1lID0gdGhpcy5kZXRhaWwuc3VybmFtZQogICAgdGhpcy5lbWFpbCA9IHRoaXMuZGV0YWlsLmVtYWlsCiAgICB0aGlzLm51bWJlcl9hZHJlc3MgPSB0aGlzLmRldGFpbC5udW1iZXJfYWRyZXNzCiAgICB0aGlzLmFkcmVzcyA9IHRoaXMuZGV0YWlsLmFkcmVzcwogICAgdGhpcy5waG9uZSA9IHRoaXMuZGV0YWlsLnBob25lCiAgICB0aGlzLnRvd24gPSB0aGlzLmRldGFpbC50b3duCiAgICB0aGlzLmxvY2F0aW9uID0gdGhpcy5kZXRhaWwubG9jYXRpb24gCgoKICB9LAogIG1ldGhvZHM6ewogICAgdXBkYXRlVXNlcjogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgCiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgIGlkOiB0aGlzLmRldGFpbC5pZCwKICAgICAgZmlyc3RuYW1lOiB0aGlzLmZpcnN0bmFtZSwKICAgICAgc3VybmFtZTogdGhpcy5zdXJuYW1lLAogICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgbnVtYmVyX2FkcmVzczogdGhpcy5udW1iZXJfYWRyZXNzLAogICAgICBhZHJlc3M6IHRoaXMuYWRyZXNzLAogICAgICBsb2NhdGlvbjogdGhpcy5sb2NhdGlvbiwKICAgICAgdG93bjogdGhpcy50b3duLAogICAgICBwaG9uZTogdGhpcy5waG9uZSwKICAgICAgfQoKICAgICAgY29uc29sZS5sb2cocGFyYW1zKTsKICAgICAgbGV0IHJlcyA9IGF3YWl0IG5vdW5vdS5tb2RpZnlVc2VyKHBhcmFtcyk7CiAgICAgIC8vIGxvY2F0aW9uLmhyZWYgPSAnL1Byb2ZpbCc7CiAgICAgIC8vIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICBjb25zb2xlLmxvZyhyZXMpOyAgICAgICAgCiAgICB9LAogICAgIFN1cHBQcm9kdWN0IDogYXN5bmMgZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgdmFyIHZlcmlmeSA9IG51bGwKICAgICAgICB2YXIgcmVzdWx0ID0gbnVsbAogICAgICAgICAgICBjb25zb2xlLmxvZyhpZCkKICAgICAgICB2ZXJpZnkgPSBjb25maXJtKCdBcmUgeW91IHN1cmUsIGRvIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHByb2R1Y3QgPycpCiAgICAgICAgaWYgKHZlcmlmeSl7CiAgICAgICAgcmVzdWx0ID0gYXdhaXQgbm91bm91LmRlbGV0ZVByb2R1Y3QoaWQpCiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KQoKICAgICAgICB9CiAgICB9LAogICAgdXBkYXRlUHJvZHVjdDogZnVuY3Rpb24oc2x1Zyl7CiAgICAgICAgICB2YXIgdXJsID0gJ1VwZGF0ZXByb2R1Y3QvJytzbHVnCiAgICAgICAgICBsb2NhdGlvbi5ocmVmPXVybAogICAgICB9LAoKICB9LAp9Cg=="},{"version":3,"sources":["Profiluser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Profiluser.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div>\n    <div class=\"col-md-12 mt-4 mb-4\">     \n        <h1>{{detail.firstname}} bienvenue sur votre profil utilisateur</h1>\n        <router-link to=\"/Gestion\" v-if=\"detail.is_admin\">Administrateur</router-link>\n        <router-link class=\"ml-5\" to=\"/Productcrea\" >Création d'annonces</router-link>       \n    </div> \n\n<div class=\"row m-auto\">\n  <div class=\"col-md-6\">\n    <h1>Mes données</h1>\n      <form class=\"text-left border p-3\">\n    \n   <div class=\"form-row\"> \n    <div class=\"form-group col-md-6\">\n       <label for=\"validationCustom01\">Pénom</label>\n      <input v-model=\"firstname\" id=\"firstname\" name=\"firstname\" type=\"text\" class=\"form-control\" placeholder=\"First name\">\n    </div>\n    <div class=\"form-group col-md-6\">\n        <label for=\"validationCustom01\">Nom</label>\n      <input v-model=\"surname\" type=\"text\" class=\"form-control\" placeholder=\"Last name\">\n    </div>\n   </div>\n  \n    <div class=\"form-row\">\n      <div class=\"form-group col-md-6\">\n        <label for=\"inputEmail4\">Adresse mail</label>\n        <input v-model=\"email\" type=\"email\" class=\"form-control\" id=\"inputEmail4\">\n      </div>\n     <div class=\"form-group col-md-6\">\n        <label for=\"inputZip\">Numéro de mobile</label>\n        <input v-model=\"phone\" type=\"phone\" class=\"form-control\" id=\"inputphone\">\n      </div>\n  </div>\n  \n  <div class=\"form-row\">\n      <div class=\"form-group col-md-2 \">\n        <label for=\"inputAddress\">N°</label>\n        <input v-model=\"number_adress\" type=\"text\" class=\"form-control\" id=\"inputAddress\" placeholder=\"1240\">\n      </div>\n      <div class=\"form-group col-md-10\">\n        <label for=\"inputAddress2\">Adresse</label>\n        <input v-model=\"adress\" type=\"text\" class=\"form-control\" id=\"inputAddress2\" placeholder=\"Adresse\">\n      </div>\n   </div> \n\n    <div class=\"form-row\"> \n      <div class=\"form-group col-md-6 \">\n        <label for=\"inputZip\">Code postal</label>\n        <input v-model=\"location\" type=\"text\" class=\"form-control\" id=\"inputZip\">\n      </div>\n       <div class=\"form-group col-md-6\">\n        <label for=\"inputCity\">Ville</label>\n        <input v-model=\"town\" type=\"text\" class=\"form-control\" id=\"inputCity\">\n      </div>\n    </div>\n  \n      <p @click=\"updateUser()\" type=\"submit\" value=\"Submit\" class=\"btn btn-primary\">modifier</p>\n    </form>\n </div>\n\n       <div class=\"col-md-6\">\n          <div >\n            <h1>Mes annonces</h1>\n            <div class=\"border p-2\" v-for=\"(productuser, index) in prod\" :key=\"index\">\n              <div>{{prod[index].title}}\n              <div @click=\"SuppProduct(prod[index].id)\" class=\"btn btn-danger\">Supp</div>\n              <div @click=\"updateProduct(prod[index].slug)\" class=\"btn btn-success\">Modif</div>\n             </div> \n            </div>\n          </div>\n        </div>\n  </div>\n</div> \n</template>\n\n<script>\n\nimport nounou from '@/services/nounou'\n\nexport default {\n    name:'Profiluser',\n    data: ()=>({\n    prod:[],\n    detail:[],\n//---[ Update User ]--\n    firstname:'',\n    surname:'',\n    email:'',\n    number_adress:'',\n    adress:'',\n    location:'',\n    town:'',\n    phone:'',\n  }),\n  created() {\n    if(localStorage.getItem('token')=='null'){\n        window.location.href = '/'\n    }\n  },\n  mounted: async function(){  \n    const res = await nounou.recupAllProductsUser()\n    this.prod = res.data.data\n    console.log(this.prod)\n\n    const resp = await nounou.recupUserDetail()\n    this.detail =resp.data.user\n    console.log(this.detail)\n\n    this.firstname = this.detail.firstname\n    this.surname = this.detail.surname\n    this.email = this.detail.email\n    this.number_adress = this.detail.number_adress\n    this.adress = this.detail.adress\n    this.phone = this.detail.phone\n    this.town = this.detail.town\n    this.location = this.detail.location \n\n\n  },\n  methods:{\n    updateUser: async function () {\n    \n      var params = {\n      id: this.detail.id,\n      firstname: this.firstname,\n      surname: this.surname,\n      email: this.email,\n      number_adress: this.number_adress,\n      adress: this.adress,\n      location: this.location,\n      town: this.town,\n      phone: this.phone,\n      }\n\n      console.log(params);\n      let res = await nounou.modifyUser(params);\n      // location.href = '/Profil';\n      // location.reload();\n      console.log(res);        \n    },\n     SuppProduct : async function (id) {\n        var verify = null\n        var result = null\n            console.log(id)\n        verify = confirm('Are you sure, do you want to delete this product ?')\n        if (verify){\n        result = await nounou.deleteProduct(id)\n        console.log(result)\n\n        }\n    },\n    updateProduct: function(slug){\n          var url = 'Updateproduct/'+slug\n          location.href=url\n      },\n\n  },\n}\n</script>\n\n<style scoped>\n/* v-if=\"detail.is_admin\" */\n</style>"]}]}